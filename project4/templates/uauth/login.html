{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>로그인</title>
  <style>
    /* (기존 스타일 그대로) */
    :root{ --bg:#0f0f10; --overlay:rgba(0,0,0,.68); --panel:#ddd; --field-bg:#efefef; --field-br:#d1d1d1; --text:#111; --muted:#666; --radius:18px; --shadow:0 20px 60px rgba(0,0,0,.45), 0 0 0 1px rgba(255,255,255,.06) inset; }
    *{box-sizing:border-box;} html,body{height:100%}
    body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR","Malgun Gothic",sans-serif; color:var(--text); background:var(--bg); }
    .backdrop{ position:fixed; inset:0; display:grid; place-items:center; background:var(--overlay); padding:20px; }
    .card{ width:min(420px,90vw); background:var(--panel); border-radius:24px; box-shadow:var(--shadow); padding:36px 32px 32px; position:relative; animation:fadein .2s ease-out; }
    @keyframes fadein{from{opacity:0;transform:scale(.96)}to{opacity:1;transform:scale(1)}}
    .close{ position:absolute; right:20px; top:16px; width:32px; height:32px; border-radius:8px; background:#f4f4f4; border:none; display:grid; place-items:center; cursor:pointer; font-size:20px; font-weight:700; }
    .close:hover{background:#e3e3e3;}
    .form{display:grid; gap:18px; margin-top:20px;}
    label{font-weight:700; margin-bottom:4px; display:block;}
    .field{ width:100%; height:48px; border-radius:10px; border:1px solid var(--field-br); background:var(--field-bg); padding:0 12px; font-size:16px; }
    .field:focus{outline:none; box-shadow:0 0 0 2px #999 inset;}
    .row-right{display:flex; justify-content:flex-end;}
    .row-right a{text-decoration:none; font-size:13px; font-weight:600; color:#000;}
    .row-right a:hover{text-decoration:underline;}
    .btn{ width:100%; height:54px; border:none; border-radius:12px; background:#9d9d9d; color:#fff; font-size:18px; font-weight:700; cursor:pointer; }
    .btn:hover{background:#8a8a8a;} .btn:active{transform:translateY(1px);}
    .sub{text-align:center; font-size:14px; color:#333; margin-top:10px;}
    .sub a{color:#000; font-weight:700; text-decoration:none;}
    .sub a:hover{text-decoration:underline;}
    .messages{margin:0 0 10px 0; padding:0; list-style:none; color:crimson; font-weight:700;}
  </style>
</head>
<body>
  <div class="backdrop">
    <div class="card">
      <a class="close" href="javascript:history.back()">X</a>

      <!-- Django messages 출력(선택) -->
      {% if messages %}
      <ul class="messages">
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
      </ul>
      {% endif %}

      <!-- ✅ 여기 수정: POST + action + csrf + name + submit -->
      <form class="form" method="post" action="{% url 'uauth:login' %}">
        {% csrf_token %}

        <div>
          <label for="username">아이디</label>
          <!-- 이메일 로그인으로 운용하려면: id/email/placeholder와 name을 모두 email로 변경 -->
          <input class="field" id="username" name="username" type="text"
                 placeholder="아이디"
                 value="{{ request.POST.username|default:'' }}" autocomplete="username" required />
        </div>

        <div>
          <label for="password">비밀번호</label>
          <input class="field" id="password" name="password" type="password"
                 placeholder="비밀번호 입력" autocomplete="current-password" required />
        </div>

        <div class="row-right">
          <a href="{% url 'uauth:email' %}">비밀번호 찾기 →</a>
        </div>

        <button type="submit" class="btn">로그인</button>

        <div class="sub">
          아직 회원이 아니신가요? <a href="{% url 'uauth:sign' %}">회원가입</a>
        </div>
      </form>
    </div>
  </div>
</body>
</html>